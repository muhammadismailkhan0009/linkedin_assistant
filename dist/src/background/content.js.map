{"mappings":"A,C,KGAO,MAAM,EACT,MAAM,cAAuC,CACzC,OAAO,IAAI,QAAQ,AAAC,IAChB,OAAO,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,QAAQ,CAAE,AAAC,IACjC,EAAQ,EAAO,KAAK,EAAI,KAC5B,EACJ,EACJ,CAEA,MAAM,cAAuC,CACzC,OAAO,IAAI,QAAQ,AAAC,IAChB,OAAO,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,YAAY,CAAE,AAAC,IACrC,EAAQ,EAAO,SAAS,EAAI,KAChC,EACJ,EACJ,CAEA,MAAM,kBAAkB,CAAoB,CAAE,CAAW,CAAE,CACvD,GAAI,CACA,IAAM,EAAQ,MAAM,IAAI,CAAC,YAAY,GAC/B,EAAY,MAAM,IAAI,CAAC,YAAY,GAEzC,GAAI,CAAC,GAAS,CAAC,EACX,MAAM,AAAI,MAAM,oCAGpB,IAAM,EAAW,MAAM,MAAM,6DAA8D,CACvF,OAAQ,OACR,QAAS,CACL,eAAgB,mBAChB,cAAiB,CAAC,OAAO,EAAE,EAAA,CAAO,AACtC,EACA,KAAM,KAAK,SAAS,CAAC,CACjB,QAAS,CACL,aAAA,EACA,IAAA,CACJ,EACA,mBAAoB,CAChB,UAAA,CACJ,CACJ,EACJ,GAEA,GAAI,CAAC,EAAS,EAAE,CACZ,MAAM,AAAI,MAAM,CAAC,eAAe,EAAE,EAAS,MAAM,CAAA,CAAE,EAGvD,IAAM,EAAO,MAAM,EAAS,IAAI,GAEhC,OADA,QAAQ,GAAG,CAAC,mCAAoC,GACzC,CACX,CAAE,MAAO,EAAO,CAEZ,OADA,QAAQ,KAAK,CAAC,oCAAqC,GAC5C,IACX,CACJ,CACJ,CCpDO,eAAe,IAClB,QAAQ,GAAG,CAAC,0CAER,AAAwB,YAAxB,SAAS,UAAU,EACnB,MAAM,IAAI,QAAQ,AAAC,GAAY,SAAS,gBAAgB,CAAC,mBAAoB,IAC7E,QAAQ,GAAG,CAAC,kCAEZ,QAAQ,GAAG,CAAC,sCAKhB,IAAM,EAAW,MAAM,AAgB3B,SAAyB,CAAgB,CAAE,EAAU,GAAK,EACtD,OAAO,IAAI,QAAQ,AAAC,IAChB,IAAM,EAAY,KAAK,GAAG,GAEpB,EAAW,YAAY,KACzB,IAAM,EAAU,KAAK,GAAG,GAAK,EACvB,EAAU,SAAS,aAAa,CAAC,GAEnC,IACA,QAAQ,GAAG,CAAC,wCACZ,cAAc,GACd,EAAQ,EAAQ,SAAS,CAAC,IAAI,KAG9B,GAAW,IACX,QAAQ,IAAI,CAAC,8CACb,cAAc,GACd,EAAQ,MAEhB,EAAG,IACP,EACJ,EAvCyB,4DAIrB,GAAI,EAMA,OAAO,CAIP,OADA,QAAQ,KAAK,CAAC,oDACR,AAAI,MAAM,8BAExB,CC7BO,eAAe,EAAsB,CAAe,EACvD,MAAM,OAAO,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAE,iBAAkB,CAAQ,EAC/D,CHEO,eAAe,IAClB,IAAI,EAAc,MAAM,AAAA,IAExB,AAAA,EADuB,MAAM,IAAI,IAAsB,iBAAiB,CAAC,EAAa,IAE1F,CDNA,QAAQ,GAAG,CAAC,iDAEZ,AAAA,G,C","sources":["<anon>","src/background/content.js","src/actions/scraper/runScraper.ts","src/services/DataExchangeService.ts","src/actions/scraper/scrapePost.ts","src/actions/scraper/storeGeneratedComment.ts"],"sourcesContent":["(() => {\nclass $1309c5b6a9dcc764$export$248a06f14bb3c802 {\n    async getAuthToken() {\n        return new Promise((resolve)=>{\n            chrome.storage.local.get([\n                \"token\"\n            ], (result)=>{\n                resolve(result.token ?? null);\n            });\n        });\n    }\n    async getInstallId() {\n        return new Promise((resolve)=>{\n            chrome.storage.local.get([\n                \"installId\"\n            ], (result)=>{\n                resolve(result.installId ?? null);\n            });\n        });\n    }\n    async sendPostToBackend(scrappedPost, url) {\n        try {\n            const token = await this.getAuthToken();\n            const installId = await this.getInstallId();\n            if (!token || !installId) throw new Error(\"Missing auth token or install ID\");\n            const response = await fetch(\"https://api.wanderlytics.me/linkedin/api/v1/create-comment\", {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                    \"Authorization\": `Bearer ${token}`\n                },\n                body: JSON.stringify({\n                    payload: {\n                        scrappedPost: scrappedPost,\n                        url: url\n                    },\n                    additionalMetadata: {\n                        installId: installId\n                    }\n                })\n            });\n            if (!response.ok) throw new Error(`Backend error: ${response.status}`);\n            const data = await response.json();\n            console.log(\"\\u2705 Comment received from backend:\", data);\n            return data;\n        } catch (error) {\n            console.error(\"\\u274C Failed to send post to backend:\", error);\n            return null;\n        }\n    }\n}\n\n\nlet $7bf3d13dc4b6a443$var$generatedComment = \"\";\nasync function $7bf3d13dc4b6a443$export$a27c74d8ed2feb95() {\n    console.log(\"\\u23F3 [Scraper] Waiting for DOM to load...\");\n    if (document.readyState === \"loading\") {\n        await new Promise((resolve)=>document.addEventListener(\"DOMContentLoaded\", resolve));\n        console.log(\"\\u2705 [Scraper] DOM fully loaded.\");\n    } else console.log(\"\\u2705 [Scraper] DOM was already ready.\");\n    const postSelector = '.update-components-update-v2__commentary span[dir=\"ltr\"]';\n    const postText = await $7bf3d13dc4b6a443$var$waitForPostText(postSelector);\n    if (postText) // let dataExchangeService = new DataExchangeService();\n    // let comment = await dataExchangeService.sendPostToBackend(postText, \"\");\n    // console.log(\"output data:\" + comment.payload);\n    // generatedComment = comment.payload;\n    // await chrome.storage.local.set({ generatedComment: comment.payload });\n    return postText;\n    else {\n        console.error(\"\\u274C [Scraper] Failed to find or extract post text.\");\n        throw new Error(\"post could not be extracted\");\n    }\n}\nfunction $7bf3d13dc4b6a443$var$waitForPostText(selector, timeout = 10000) {\n    return new Promise((resolve)=>{\n        const startTime = Date.now();\n        const interval = setInterval(()=>{\n            const elapsed = Date.now() - startTime;\n            const element = document.querySelector(selector);\n            if (element) {\n                console.log(\"\\u2705 [Scraper] Found post text element.\");\n                clearInterval(interval);\n                resolve(element.innerText.trim());\n            }\n            if (elapsed >= timeout) {\n                console.warn(\"\\u26A0\\uFE0F [Scraper] Timeout: Post text not found.\");\n                clearInterval(interval);\n                resolve(null);\n            }\n        }, 500);\n    });\n}\n\n\nasync function $a6266c4d9b263f87$export$252c877b0ff122e7(comment) {\n    await chrome.storage.local.set({\n        generatedComment: comment\n    });\n}\n\n\nasync function $8f344cde988e99c8$export$203201cb94deadb2() {\n    let scrapedPost = await (0, $7bf3d13dc4b6a443$export$a27c74d8ed2feb95)();\n    let generatedComment = await new (0, $1309c5b6a9dcc764$export$248a06f14bb3c802)().sendPostToBackend(scrapedPost, \"\");\n    (0, $a6266c4d9b263f87$export$252c877b0ff122e7)(generatedComment);\n}\n\n\nconsole.log(\"\\u2705 [LinkedIn Scraper] Content script injected.\");\n(0, $8f344cde988e99c8$export$203201cb94deadb2)();\n\n})();\n//# sourceMappingURL=content.js.map\n","import { runScraper } from \"@actions/scraper/runScraper\";\n\nconsole.log(\"✅ [LinkedIn Scraper] Content script injected.\");\n\nrunScraper();","import { DataExchangeService } from \"services/DataExchangeService\";\nimport { scrapePost } from \"./scrapePost\";\nimport { storeGeneratedComment } from \"./storeGeneratedComment\";\n\nexport async function runScraper() {\n    let scrapedPost = await scrapePost();\n    let generatedComment = await new DataExchangeService().sendPostToBackend(scrapedPost, \"\");\n    storeGeneratedComment(generatedComment);\n}","export class DataExchangeService {\n    async getAuthToken(): Promise<string | null> {\n        return new Promise((resolve) => {\n            chrome.storage.local.get([\"token\"], (result) => {\n                resolve(result.token ?? null);\n            });\n        });\n    }\n\n    async getInstallId(): Promise<string | null> {\n        return new Promise((resolve) => {\n            chrome.storage.local.get([\"installId\"], (result) => {\n                resolve(result.installId ?? null);\n            });\n        });\n    }\n\n    async sendPostToBackend(scrappedPost: string, url: string) {\n        try {\n            const token = await this.getAuthToken();\n            const installId = await this.getInstallId();\n\n            if (!token || !installId) {\n                throw new Error(\"Missing auth token or install ID\");\n            }\n\n            const response = await fetch(\"https://api.wanderlytics.me/linkedin/api/v1/create-comment\", {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                    \"Authorization\": `Bearer ${token}`\n                },\n                body: JSON.stringify({\n                    payload: {\n                        scrappedPost,\n                        url\n                    },\n                    additionalMetadata: {\n                        installId\n                    }\n                })\n            });\n\n            if (!response.ok) {\n                throw new Error(`Backend error: ${response.status}`);\n            }\n\n            const data = await response.json();\n            console.log(\"✅ Comment received from backend:\", data);\n            return data;\n        } catch (error) {\n            console.error(\"❌ Failed to send post to backend:\", error);\n            return null;\n        }\n    }\n}\n","import { DataExchangeService } from \"services/DataExchangeService\";\n\nlet generatedComment = \"\";\nexport async function scrapePost() {\n    console.log(\"⏳ [Scraper] Waiting for DOM to load...\");\n\n    if (document.readyState === \"loading\") {\n        await new Promise((resolve) => document.addEventListener(\"DOMContentLoaded\", resolve));\n        console.log(\"✅ [Scraper] DOM fully loaded.\");\n    } else {\n        console.log(\"✅ [Scraper] DOM was already ready.\");\n    }\n\n    const postSelector = '.update-components-update-v2__commentary span[dir=\"ltr\"]';\n\n    const postText = await waitForPostText(postSelector);\n\n    if (postText) {\n        // let dataExchangeService = new DataExchangeService();\n        // let comment = await dataExchangeService.sendPostToBackend(postText, \"\");\n        // console.log(\"output data:\" + comment.payload);\n        // generatedComment = comment.payload;\n        // await chrome.storage.local.set({ generatedComment: comment.payload });\n        return postText;\n\n    } else {\n        console.error(\"❌ [Scraper] Failed to find or extract post text.\");\n        throw new Error(\"post could not be extracted\");\n    }\n}\n\nfunction waitForPostText(selector: string, timeout = 10000): Promise<string | null> {\n    return new Promise((resolve) => {\n        const startTime = Date.now();\n\n        const interval = setInterval(() => {\n            const elapsed = Date.now() - startTime;\n            const element = document.querySelector(selector) as HTMLElement;\n\n            if (element) {\n                console.log(\"✅ [Scraper] Found post text element.\");\n                clearInterval(interval);\n                resolve(element.innerText.trim());\n            }\n\n            if (elapsed >= timeout) {\n                console.warn(\"⚠️ [Scraper] Timeout: Post text not found.\");\n                clearInterval(interval);\n                resolve(null);\n            }\n        }, 500);\n    });\n}","export async function storeGeneratedComment(comment: string) {\n    await chrome.storage.local.set({ generatedComment: comment });\n}"],"names":["$1309c5b6a9dcc764$export$248a06f14bb3c802","getAuthToken","Promise","resolve","chrome","storage","local","get","result","token","getInstallId","installId","sendPostToBackend","scrappedPost","url","Error","response","fetch","method","headers","body","JSON","stringify","payload","additionalMetadata","ok","status","data","json","console","log","error","$7bf3d13dc4b6a443$export$a27c74d8ed2feb95","document","readyState","addEventListener","postText","$7bf3d13dc4b6a443$var$waitForPostText","selector","timeout","startTime","Date","now","interval","setInterval","elapsed","element","querySelector","clearInterval","innerText","trim","warn","$a6266c4d9b263f87$export$252c877b0ff122e7","comment","set","generatedComment","$8f344cde988e99c8$export$203201cb94deadb2","scrapedPost"],"version":3,"file":"content.js.map"}